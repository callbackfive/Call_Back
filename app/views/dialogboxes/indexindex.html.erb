<div id="dialogbox-id" data-dialogbox-id="<%= @dialogbox_id %>"></div>

<div class="container">
  <div class="wrapper">  
    <div class="grid-items">
      <div class="dialogboxes-index">
        <div class="dialogboxes-sent-by-me">
          <!-- 我發出的聯絡訊息列表 -->
          <% if @my_sent_dialogboxes %>
            <% @my_sent_dialogboxes.each do |dialogbox| %> 
              <%= link_to dialogbox do %>
                <div class="dialogbox-link">
                  <%= dialogbox.project.title %>(專案名)
                </div>
              <% end %>
            <% end %>
          <% else %>
            <div>您沒有發送過任何訊息</div>
          <% end %>
        </div>
        <%# 我的專案收到的聯絡訊息列表 %>
        <div class="guest-send-dialogboxes">
          <% if @dialogboxes_of_my_projects %>
            <% @dialogboxes_of_my_projects.each do |dialogbox|%>
              <%= link_to dialogbox do %>
                <div class="dialogbox-card p-5 my-5 rounded-2xl border-4 border-light-blue-500 border-opacity-100">
                  <%= dialogbox.user.name %> 對您的專案發送訊息...
                  <div class="dialogbox-of-the-project">
                    <%= dialogbox.project.title %>
                  </div>
                </div>
              <% end %>
            <% end %>
          <% else %>
            <div>您的專案沒有收到任何訊息</div>
          <% end %>
        </div>
      </div>
      <div class="the-dialogbox">
        <% if @dialogbox.present? %>
          <div class="dialogbox-title">
            <h4><%= @dialogbox.project.title %></h4>
          </div>  
          <div class="dialogbox-content">
            <div id="messages-container">
              <% @messages.each do |message| %>
                <%= render 'messages/message', message: message %>
              <% end %>
            </div>
          </div>
          <div class="message-form">
            <%= render 'dialogboxes/msg_form', message: Message.new, dialogbox: @dialogbox %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>



